# spark-defaults.conf — SedonaSpark → LakeKeeper → Garage
# Placed at /opt/spark/conf/spark-defaults.conf inside the Sedona container.

# ── Iceberg extensions ──
spark.sql.extensions                                      org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions,org.apache.sedona.sql.SedonaSqlExtensions
spark.jars.packages                                       org.apache.iceberg:iceberg-spark-runtime-4.0_2.13:1.10.1,org.apache.iceberg:iceberg-aws-bundle:1.10.1

# ── Catalog: "lakehouse" backed by LakeKeeper REST ──
spark.sql.catalog.lakehouse                               org.apache.iceberg.spark.SparkCatalog
spark.sql.catalog.lakehouse.catalog-impl                  org.apache.iceberg.rest.RESTCatalog
spark.sql.catalog.lakehouse.uri                           http://lakekeeper:8181/catalog
spark.sql.catalog.lakehouse.token                         dummy
spark.sql.catalog.lakehouse.warehouse                     lakehouse

# ── S3 FileIO → Garage ──
spark.sql.catalog.lakehouse.io-impl                       org.apache.iceberg.aws.s3.S3FileIO
spark.sql.catalog.lakehouse.s3.endpoint                   http://garage:3900
spark.sql.catalog.lakehouse.s3.access-key-id              GK8e7e0e5439eda8588e0a2693
spark.sql.catalog.lakehouse.s3.secret-access-key          3dfca5c6f09403e7b954f94a91f59a61c1c3c9230ac5d50e8bba58c81c3a1533
spark.sql.catalog.lakehouse.s3.path-style-access          true
spark.sql.catalog.lakehouse.s3.region                     garage

# ── Hadoop S3A (for direct s3a:// paths) ──
spark.hadoop.fs.s3a.endpoint                              http://garage:3900
spark.hadoop.fs.s3a.access.key                            GK8e7e0e5439eda8588e0a2693
spark.hadoop.fs.s3a.secret.key                            3dfca5c6f09403e7b954f94a91f59a61c1c3c9230ac5d50e8bba58c81c3a1533
spark.hadoop.fs.s3a.path.style.access                     true
spark.hadoop.fs.s3a.impl                                  org.apache.hadoop.fs.s3a.S3AFileSystem

# ── Default catalog ──
spark.sql.defaultCatalog                                  lakehouse
